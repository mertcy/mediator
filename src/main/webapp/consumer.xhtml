<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:h="http://java.sun.com/jsf/html"
                xmlns:f="http://java.sun.com/jsf/core"
                xmlns:ui="http://java.sun.com/jsf/facelets"
                xmlns:p="http://primefaces.org/ui"
                template="/WEB-INF/template.xhtml">

    <ui:define name="content">
<h:form>
	<p:dataTable id="xs" var="user" scrollable="true" scrollHeight="355" value="#{searchManagedBean.userList}">
		<p:column headerText="User Name">
	        <h:outputText value="#{user.userName}" />
	    </p:column>
	 	<p:column headerText="Email">
	        <h:outputText value="#{user.email}" />
	    </p:column>
	    <p:column headerText="Profile">
    		<p:commandButton value="Go to Profile" ajax="false" action="#{buttonManagedBean.toProfileProvider(user.id)}" styleClass="p-mt-3 ui-button-outlined p-d-block"/>	    
	    </p:column>
	    <p:column headerText="Rate">
    		<p:commandButton value="Click to Rate" action="#{buttonManagedBean.setSelectedProviderId(user.id)}" oncomplete="PF('rate').show();return false;" styleClass="p-mt-3 ui-button-outlined p-d-block"/>	
	    </p:column>	    
	</p:dataTable>
	
	<div style="position: absolute; left: 1px; top: 1px;">
    	<p:dialog header="Rate Provider" widgetVar="rate" position="top" modal="false" resizable="false" style="width:600px">
			<h:panelGrid>
				<p:selectOneMenu id="rating" value="#{buttonManagedBean.rating}" style="width:270px">
					<p:ajax listener="#{buttonManagedBean.rateProvider()}"/>
					<f:selectItem itemLabel="Select rating point (1:low, 5:high)" itemValue="0" noSelectionOption="true"/>
					<f:selectItems value="#{buttonManagedBean.ratings}"/>
				</p:selectOneMenu>
				<p:commandButton value="Submit" ajax="false" action="#{buttonManagedBean.rateProvider()}" styleClass="p-mt-3 ui-button-outlined p-d-block"/>				
			</h:panelGrid>
		</p:dialog>
	</div>	

	<h:panelGrid columns="3" cellpadding="30">
		<p:selectOneMenu id="service" value="#{buttonManagedBean.service}" style="width:150px">
			<p:ajax listener="#{buttonManagedBean.onServiceChange()}"/>
			<f:selectItem itemLabel="Select a service" itemValue="" noSelectionOption="true"/>
			<f:selectItems value="#{buttonManagedBean.services}"/>
		</p:selectOneMenu>
		<p:commandButton value="Filter Service" ajax="false" action="#{searchManagedBean.getFilteredUserList(buttonManagedBean.service)}" styleClass="p-mt-3 ui-button-outlined p-d-block"/>
		<p:commandButton value="Clear Filter" ajax="false" action="#{searchManagedBean.clearFilter}" styleClass="p-mt-3 ui-button-outlined p-d-block"/>
	</h:panelGrid>
	<div class="EmptyBox20"></div>
</h:form>        
    </ui:define>

</ui:composition>